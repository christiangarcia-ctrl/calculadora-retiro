<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calculadora de Ahorro y Retiro ‚Äì Christian GarBa</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
<style>
  :root{
    --brand:#0B5ED7;--brand-2:#084cc3;
    --ink:#0f172a;--ink-2:#334155;--muted:#64748b;
    --paper:#ffffff;--stroke:#e5e7eb;--wa:#25D366;
  }
  body{margin:0;font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;background:linear-gradient(135deg,#0b1223,#121a2f);color:#e5e7eb}
  .container{max-width:1040px;margin:0 auto;padding:24px}
  .header{background:var(--paper);color:var(--ink);border:1px solid var(--stroke);border-radius:16px;padding:18px 20px;display:flex;align-items:center;gap:16px;box-shadow:0 8px 24px rgba(15,23,42,.16)}
  .brand img{height:56px;width:auto}
  .brand-title{font-weight:800;font-size:22px;color:var(--ink)}
  .brand-sub{font-size:13px;color:var(--muted)}
  .head-meta{margin-left:auto;text-align:right;font-size:14px;color:var(--ink-2)}
  .banner{background:#fff7ed;color:#7c2d12;border:1px solid #fed7aa;border-left:6px solid #fb923c;border-radius:14px;padding:14px 16px;margin:18px 0;box-shadow:0 4px 14px rgba(2,6,23,.12)}
  .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:22px;margin:16px 0}
  .card h2{margin:0 0 10px;font-weight:800;font-size:20px;color:#dbe3f3}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
  label{font-size:12px;color:#cbd5e1;margin-bottom:6px;font-weight:600}
  input,select{padding:12px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.05);color:#fff;border-radius:10px;font-size:16px}
  .muted{font-size:12px;color:#94a3b8;margin-top:6px}
  .suggest{border:1px solid rgba(11,94,215,.35);background:rgba(11,94,215,.08);border-left:6px solid var(--brand);border-radius:14px;padding:14px;margin-top:12px}
  .kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:6px}
  .kpi{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:16px}
  .kpi-label{font-size:11px;color:#a9b4c7;text-transform:uppercase}
  .kpi-value{font-size:22px;font-weight:800;color:#f8fafc}
  .details-toggle{cursor:pointer;border:1px solid rgba(255,255,255,.12);padding:12px 14px;border-radius:12px;margin-top:10px}
  .details{display:none;overflow:auto}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,.08)}
  th{background:rgba(255,255,255,.08);text-align:left}
  .btn{background:var(--brand);border:none;color:#fff;padding:10px 14px;border-radius:8px;font-weight:700;cursor:pointer}
  .btn:hover{background:var(--brand-2)}
  .wa{position:fixed;right:18px;bottom:22px;background:var(--wa);color:#06371a;border-radius:999px;padding:12px 16px;font-weight:800;box-shadow:0 10px 24px rgba(0,0,0,.25)}
</style>
</head>
<body>
<div class="container">

  <div class="header">
    <div class="brand"><img src="./logo-garba.png" alt="Christian GarBa"></div>
    <div>
      <div class="brand-title">Christian GarBa</div>
      <div class="brand-sub">Seguros con Estrategia</div>
    </div>
    <div class="head-meta">
      <div>üìû 662 417 6032</div>
      <div>‚úâÔ∏è christian.garcia@sfgarba.com.mx</div>
    </div>
  </div>

  <div class="banner"><strong>¬øAFORE (Ley ‚Äô97 en adelante)?</strong> Tu AFORE no ser√° suficiente <em>(y lo sabes)</em>. Empezar <u>hoy</u> tu ahorro adicional marca la diferencia: cuanto antes inicies, <strong>menos tendr√°s que aportar</strong> para lograr el mismo ingreso y m√°s tranquilidad al llegar a los 65.</div>

  <div class="card">
    <h2>Tu punto de partida</h2>
    <div class="grid">
      <div class="group">
        <label>Tu nombre (opcional)</label>
        <input id="nombreOpt" type="text" placeholder="Ej. Fernanda">
      </div>
      <div class="group">
        <label>Edad actual (a√±os)</label>
        <input id="edad" type="number" value="30" min="18" max="70">
      </div>
      <div class="group">
        <label>A√±os de plan</label>
        <select id="years">
          <option value="15">15 a√±os</option>
          <option value="20">20 a√±os</option>
          <option value="25" selected>25 a√±os</option>
        </select>
      </div>
      <div class="group">
        <label>¬øCu√°nto te gustar√≠a recibir al mes en tu retiro? (MXN, valor de hoy)</label>
        <input id="ingresoMeta" type="number" placeholder="Ej. 30,000">
      </div>
    </div>

    <div class="muted">La edad de retiro considerada es de 65 a√±os.</div>

    <div class="toolbar" style="margin-top:10px">
      <button class="btn" id="calcBtn">Calcular mi plan personalizado</button>
      <button class="btn" style="background:#475569" id="resetBtn">Reiniciar datos</button>
    </div>

    <div class="suggest" id="sugerenciaBox" style="display:none">
      <div>üí° Para lograr el ingreso que buscas en tu retiro, un <strong>ahorro mensual inicial de <span id="sugAhorro">$0</span></strong> ser√≠a un buen punto de partida.<br><span class="muted">Esto es s√≥lo una gu√≠a; puedes iniciar desde $2,500 MXN al mes. Lo importante es empezar.</span></div>
    </div>
  </div>

  <div class="card">
    <h2>Fase 1 ‚Ä¢ Ahorro con inter√©s compuesto</h2>
    <div class="grid">
      <div class="group">
        <label>Aportaci√≥n inicial (MXN)</label>
        <input id="lumpSum" type="number" value="0">
      </div>
      <div class="group">
        <label>Aportaci√≥n mensual (MXN)</label>
        <input id="pmt" type="number" value="2500">
      </div>
      <div class="group">
        <label>Rendimiento anual esperado (%)</label>
        <input id="rate" type="number" value="10">
      </div>
      <div class="group">
        <label>Inflaci√≥n promedio anual (%)</label>
        <input id="inflation" type="number" value="4">
      </div>
    </div>

    <div class="kpis">
      <div class="kpi"><div class="kpi-label">Edad al finalizar aportaciones</div><div class="kpi-value" id="edadFinal">‚Äî</div></div>
      <div class="kpi"><div class="kpi-label">Ahorro acumulado (nominal)</div><div class="kpi-value" id="ahorroNominal">‚Äî</div></div>
      <div class="kpi"><div class="kpi-label">Total aportado</div><div class="kpi-value" id="totalAportado">‚Äî</div></div>
      <div class="kpi"><div class="kpi-label">Rendimiento ganado</div><div class="kpi-value" id="rendimiento">‚Äî</div></div>
      <div class="kpi" data-kpi-65 style="display:none"><div class="kpi-label">Fondo a los 65 (si aplica)</div><div class="kpi-value" data-kpi-65-val>‚Äî</div></div>
    </div>

    <div class="details-toggle" id="toggleTable"><strong>Detalles a√±o por a√±o ‚ñº</strong></div>
    <div class="details" id="details"><table><thead><tr><th>A√±o</th><th>Edad</th><th>Aportado ese a√±o</th><th>Saldo al cierre</th></tr></thead><tbody id="tbody"></tbody></table></div>
  </div>

  <a id="waBtn" class="wa" target="_blank">Chatear por WhatsApp</a>
</div>

<script>
const $ = id => document.getElementById(id);
const money = v => new Intl.NumberFormat('es-MX',{style:'currency',currency:'MXN'}).format(v||0);
function countUp(el,v,fmt=v=>v){el.textContent=fmt(v);}
let lastAhorro=0;

function calcAccum(){
  const edad=parseFloat($('edad').value);
  const years=parseFloat($('years').value);
  const pmt=parseFloat($('pmt').value);
  const lump=parseFloat($('lumpSum').value);
  const rate=parseFloat($('rate').value)/100;
  const infl=parseFloat($('inflation').value)/100;
  const freq=12;

  const edadFin=edad+years;
  const yearsEff=Math.max(0,Math.min(years,65-edad));
  const N=yearsEff*freq, i=rate/freq;

  let FV_lump=lump*Math.pow(1+i,N), FV_pmt=0, total=lump, pmtYear=pmt;
  for(let y=0;y<yearsEff;y++){if(y>0)pmtYear*=(1+infl);for(let p=0;p<freq;p++){const rest=N-(y*freq+p);FV_pmt+=pmtYear*Math.pow(1+i,rest);total+=pmtYear;}}
  let FV=FV_lump+FV_pmt, rend=FV-total;
  countUp($('edadFinal'),Math.round(edadFin),v=>String(Math.round(v)));
  countUp($('ahorroNominal'),FV,money);
  countUp($('totalAportado'),total,money);
  countUp($('rendimiento'),rend,money);

  // Fondo a los 65
  const k65=document.querySelector('[data-kpi-65]');
  const k65v=document.querySelector('[data-kpi-65-val]');
  if(edadFin<65){let FV65=FV*Math.pow(1+i,(65-edadFin)*freq);k65.style.display='block';k65v.textContent=money(FV65);}else{k65.style.display='none';}

  // Tabla
  const tbody=$('tbody');tbody.innerHTML='';
  let saldo=lump,pmtY=pmt,edadAct=edad;
  const totalYrs=(edadFin<65)?(65-edad):yearsEff;
  for(let yr=1;yr<=totalYrs;yr++){edadAct++;let aport=0;
    if(yr<=yearsEff){if(yr>1)pmtY*=(1+infl);aport=pmtY*freq;for(let k=0;k<freq;k++){saldo=saldo*(1+i)+pmtY;}}
    else{for(let k=0;k<freq;k++){saldo=saldo*(1+i);}}
    const tr=document.createElement('tr');if(yr>yearsEff)tr.style.background='rgba(11,94,215,.08)';
    tr.innerHTML=`<td>${yr}</td><td>${edadAct} a√±os</td><td>${yr>yearsEff?'‚Äî':money(aport)}</td><td>${money(saldo)}</td>`;tbody.appendChild(tr);}
}

function calcSuggest(){
  const ingreso=parseFloat($('ingresoMeta').value);
  const edad=parseFloat($('edad').value);
  const years=parseFloat($('years').value);
  const rate=10/100, infl=4/100, yrsRet=20, rateRet=7/100, inflRet=4/100;
  if(!ingreso)return;
  const rRealRet=((1+rateRet)/(1+inflRet))-1, iRet=rRealRet/12, nRet=yrsRet*12;
  const PVnec=ingreso*((1-Math.pow(1+iRet,-nRet))/iRet);
  const yearsEff=Math.max(0,Math.min(years,65-edad));
  const rRealAcc=((1+rate)/(1+infl))-1, iAcc=rRealAcc/12, N=yearsEff*12;
  const factor=(Math.pow(1+iAcc,N)-1)/iAcc;
  const pmtIni=PVnec/factor;
  $('sugerenciaBox').style.display='block';
  $('sugAhorro').textContent=money(pmtIni);
}

document.getElementById('calcBtn').addEventListener('click',()=>{calcAccum();calcSuggest();});
document.getElementById('resetBtn').addEventListener('click',()=>{document.querySelectorAll('input').forEach(i=>i.value='');document.querySelectorAll('.kpi-value').forEach(k=>k.textContent='‚Äî');document.getElementById('sugerenciaBox').style.display='none';});
document.getElementById('toggleTable').addEventListener('click',()=>{const d=$('details');d.style.display=d.style.display==='block'?'none':'block';});
</script>
</body>
</html>
